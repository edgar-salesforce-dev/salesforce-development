<template>
    <c-custom-card icon-name="standard:data_graph" show-title with-aside variant="slds-theme_shade">
        <span slot="title">Weather Manager</span>
        <section slot="aside">
            <form onsubmit={handleGetWeatherInformation}>
                <lightning-input type="text" label="City" placeholder="e.g., New York" onchange={handleCityChange}
                    value={city}></lightning-input>
                <div class="slds-var-m-top_small">
                    <lightning-button variant="neutral" label="Get Weather" type="submit"></lightning-button>
                </div>
                <div class="slds-var-m-vertical_x-small">
                    <lightning-icon icon-name="utility:info" size="xx-small" variant="brand" class="slds-var-m-right_xx-small"></lightning-icon>
                    <small>Use english version for better results</small>
                </div>
                <template lwc:if={isError}>
                    <section class="slds-box slds-theme_error slds-var-m-top_large">
                        <p>{error}</p>
                    </section>
                </template>
            </form>
        </section>
        <section slot="body">
            <template lwc:if={isLoading}>
                <div class="slds-is-relative" style="height: 6rem;">
                    <lightning-spinner alternative-text="Loading" size="large" variant="brand"></lightning-spinner>
                </div>
            </template>
            <template lwc:elseif={isData}>
                <article class="slds-is-relative">
                    <article class="slds-is-absolute weather-details_card slds-size_1-of-1 slds-large-size_3-of-12 slds-medium-size_6-of-12 slds-small-size_11-of-12">
                        <c-wp-details-card name={name} main={main} wind={wind}></c-wp-details-card>
                    </article>
                    <article class="slds-box slds-theme_shade">
                        <c-wp-location-map coord={coord}></c-wp-location-map>
                    </article>
                </article>
            </template>
            <template lwc:else>
                <article class="slds-box">
                    <p class="slds-text-align_center">
                        Type a city to get its information...
                    </p>
                </article>
            </template>
        </section>
    </c-custom-card>
</template>